{% extends "capstone/layout.html" %}

{% block body %}
{% block nav %}
{% endblock %}

<div class="topnav" id="myTopnav">
    <a href="{% url 'index' %}" class="active"><img src="static/capstone/favicon.ico"
        style="width:30px; height:30px; margin-right:10px;">Rome Travel</a>

    <a href="{% url 'places' %}">Map of Rome</a>
    {% if user.is_authenticated %}
    <a href="{% url 'favorites' %}">Favorites</a>
    <a href="{% url 'logout' %}">Logout</a>
    {% else %}
    <a href="{% url 'login' %}">Login</a>
    <a href="{% url 'register' %}">Register</a>
    {% endif %}
    <a href="javascript:void(0);" class="icon" onclick="myFunction()">
      <i class="fa fa-bars"></i>
    </a>
</div>

<script>
    function myFunction() {
      var x = document.getElementById("myTopnav");
      if (x.className === "topnav") {
        x.className += " responsive";
      } else {
        x.className = "topnav";
      }
    }
</script>


<h3 style="margin:10px;">Quiz for Rome Travel</h3>


<!-- code for react -->

<div id="app"></div>

<script type="text/babel">

  function App() {

    const [state, setState] = React.useState({
      num1: 1,
      num2: 2,
      response: "",
      score: 0
    })

    function inputKeyPress(event) {
      if (event.key === "Enter") {
        const answer = parseInt(state.response);
        if (state.num1 + state.num2 === answer) {
          // user got right
          setState({
            ...state,
            num1: Math.ceil(Math.random() * 10),
            num2: Math.ceil(Math.random() * 10),
            score: state.score + 1,
            response: ""
          });
        } else {
          //user got wrong
          setState({
            ...state,
            score: state.score - 1,
            response: ""
          });
        }
      }
    }

    function updateResponse(event) {
      setState({
        ...state,
        response: event.target.value
      })
    }

    return (
      <div>
        <div className="incorrect" id="problem">{state.num1} + {state.num2}</div>
        <input autoFocus={true} onKeyPress={inputKeyPress} onChange={updateResponse} value={state.response} />
        <div>Score: {state.score}</div>
      </div>
      )
  };

    ReactDOM.render(
        <App />,
        document.querySelector("#app"));
</script>

{% endblock %}

