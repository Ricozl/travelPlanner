{% extends "capstone/layout.html" %}

{% block body %}
{% block nav %}
{% endblock %}

<div class="topnav" id="myTopnav">
    <a href="{% url 'index' %}" class="active"><img src="static/capstone/favicon.ico"
        style="width:30px; height:30px; margin-right:10px;">Rome Travel</a>

    <a href="{% url 'places' %}">Map of Rome</a>
    {% if user.is_authenticated %}
    <a href="{% url 'favorites' %}">Favorites</a>
    <a href="{% url 'logout' %}">Logout</a>
    {% else %}
    <a href="{% url 'login' %}">Login</a>
    <a href="{% url 'register' %}">Register</a>
    {% endif %}
    <a href="javascript:void(0);" class="icon" onclick="myFunction()">
      <i class="fa fa-bars"></i>
    </a>
</div>

<script>
    function myFunction() {
      var x = document.getElementById("myTopnav");
      if (x.className === "topnav") {
        x.className += " responsive";
      } else {
        x.className = "topnav";
      }
    }
</script>

{% if user.is_authenticated %}

<h3 style="margin:10px;">Favorites for {{ user.username }}</h3>
<!--<h2 style="color:black; margin:10px;">Favorites for {{ user.username }}</h2>-->
<div id="favorites">
    {% csrf_token %}

    {% for favorite in favorites %}

        <h4>{{ favorite.item.title }}</h4>
        {% if favorite.item.image_url %}
            <p><img src="{{ favorite.item.image_url }}" style="width:400px; height:400px;"></p>
        {% endif %}

        <p>{{ favorite.item.description }}</p>
        <p><img src="static/capstone/red-heart.png" style="width:20px; height:20px;">Click to add to Favorites</p>
        <p><img src="static/capstone/open-heart.png" style="width:20px; height:20px;">Click to remove</p>
        <br><br>
    {% empty %}
        <p>No Favorites yet.</p>
    {% endfor %}

</div>
{% endif %}

<!-- code for react -->
<div id="form"></div>

<div id="app"></div>

<script type="text/babel">
function App() {
    const questions = [
        {
            questionText: "What is the capital of France?",
            answerOptions: [
                { answerText: 'New York', isCorrect: false},
                { answerText: 'London', isCorrect: false },
                { answerText: 'Paris', isCorrect: true },
                { answerText: 'Dublin', isCorrect: false }
            ],

        },
        {
            questionText: 'Who is CEO of Tesla?',
            answerOptions: [
                { answerText: 'Jeff Bezos', isCorrect: false },
                { answerText: 'Elon Musk', isCorrect: true },
                { answerText: 'Bill Gates', isCorrect: false },
                { answerText: 'Tony Stark', isCorrect: false }
            ],
        },
    ];

    const [currentQuestion, setCurrentQuestion] = useState(0);

    const [showScore, setShowScore] = useState(false);
    const [score, setScore] = useState(0);

    const handleAnswerButtonClick = (isCorrect) => {
        if(isCorrect === true) {
            setScore(score + 1);
        }
        const nextQuestion = currentQuestion + 1;
        if (nextQuestion < questions.length) {
            set currentQuestion(nextQuestion);
        } else {
            setShowScore(true);
        }

    };

    return {
        <div className='app'>
            showScore ? (
                <div className='score-section'>You scored {score} out of (questions.length)</div>
            ) : (
                <>
                    <div className='question-section'>
                        <div className='question-count'>
                            <span>Question {currentQuestion + 1}</span>/(questions.length)
                    </div>
                    <div className='question-text'>{questionsText[currentQuestion]}</div>
                    </div>
                    <div className='answer-section'>
                        (questions[currentQuestion].answerOptions.map([answerOption] =>
                            <button onClick(() => handleAnswerButtonClick(answerOption.isCorrect)>{answerOptions.answerText}</button>
                        )))

                    </div>
                </>
            )}
        </div>

}



<script type="text/babel">
    function App() {
        const [count, setCount] = React.useState(0);

        function updateCount() {
            setCount(count + 1);
        }
        return (
            <div>
                <div>{count}</div>
                <button onClick={updateCount}>Count</button>
            </div>
        );
    }

    ReactDOM.render(<App />, document.querySelector("#app"));
</script>

{% endblock %}


